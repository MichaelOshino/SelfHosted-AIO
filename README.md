<div align='center'>
 Репозиторий all-in-one (AIO) предназначен для запуска на персональных серверах повседневных сервисов в Docker-контейнерах с использованием Ansible.
 <p> 
</div>

>⚠️  Внимание!  ⚠️   
>Данный репозиторий предназначен для личного использования в легальных целях.   
>Для продакшена потребуется адаптация и тестирование.
__________________________  

**Текущие сервисы** (cписок может пополнятся со временем)**:**  
[3x-ui](https://github.com/MHSanaei/3x-ui) - Веб-панель для управления Xray-core (прокси-сервер).  

**Требования:**  
Домен привязанный к серверу;  
На сервере должны быть установлены: git, docker, docker-compose-v2, ansible.

__________________________

## Запуск

После подключения по SSH и установки git, docker, docker-compose-v2, ansible выполнить:
```bash
git clone https://github.com/MichaelOshino/SelfHosted-AIO.git && cd SelfHosted-AIO
```
**Выполните предварительную настройку:**   
&emsp; Любым текстовым редактором откройте в директории **group_vars** файл с названием запускаемого сервиса и укажите значения согласно комментариям внутри файла.

Затем через sudo или от root:
```bash
ansible-playbook -i hosts deploy.yml --tags "service_name,service_name"
```
Вместо **service_name** укажите название желаемых сервисов для запуска:  
3x-ui
__________________________

## Детали и нюансы

**Общее:**  
&emsp; После запуска конфигурация и данные будут находиться в директории: /opt  
&emsp; В роли реверс-прокси используется traefik - он будет автоматически выпускать сертификаты для доменнов/поддоменов при первом запуске и автоматически их продлевать. Он же выполняет перенаправление с http на https.

### 3x-ui:
&emsp; Должен запускаться на отдельном сервере, который будет выполнять только роль прокси-сервера.

Доступные варианты подключений:   
>Протокол: **vless/trojan (оверхед)**  
>Транспорт: **tcp (raw)/xhttp/grpc**  
>Безопасность: **reality**  

>Протокол: **vless/vmess/trojan (оверхед)**  
>Транспорт: **xhttp/websocket/httpupgrade**   
>Безопасность: **TLS**

- С reality трафик идёт напрямую минуя traefik и требуется в панели для подключения указывать 443 порт.
- Для подключения с TLS включайте **External Proxy** в панели и указывайте TLS + домен панели + 443 порт.
- Для работы подписок в настройках, во вкладке "Подписка", укажите **URI обратного прокси** домен панели и путь, например: https://example.com/sub/ 

Стандартные доступы от панели:  
Login: **admin**  
Password: **admin**  
>После первой авторизации обязательно измените в настройках логин и пароль, а так же подключте 2FA.

__________________________

## Лицензия

Проект распространяется под лицензией MIT.  
Подробнее см. в файле [LICENSE](https://github.com/MichaelOshino/SelfHosted-AIO/blob/master/LICENSE.md)

В репозитории используются сторонние проекты с различными лицензиями. Ознакомьтесь с лицензиями каждого проекта:
1. [3x-ui](https://github.com/MHSanaei/3x-ui) - https://github.com/MHSanaei/3x-ui/blob/main/LICENSE
